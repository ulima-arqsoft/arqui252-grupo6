> [0. Acerca del Grupo](../../0.md) ‚Ä∫ [0.7. Trabajo Individual (Patrones Cloud)](../0.7.md) ‚Ä∫ [0.7.5. Integrante 5](0.7.5.md)

# 0.7.5. Integrante 5
# PatroÃÅn de Arquitectura: Anti-Corruption Layer (ACL)

El patr√≥n **Anti-Corruption Layer (ACL)** se utiliza para **proteger el modelo interno de un sistema** cuando necesita integrarse con sistemas externos que usan **modelos de datos, formatos o comportamientos muy diferentes**.  
Su prop√≥sito principal es **evitar que la complejidad o malas pr√°cticas del sistema externo ‚Äúcorrompan‚Äù la l√≥gica interna** del sistema que se est√° desarrollando.

---

## Problema

Cuando un sistema moderno debe comunicarse con un sistema legado o un servicio externo que:

- Utiliza un **modelo de datos inconsistente** o ca√≥tico.  
- Tiene **nombres, reglas de negocio o contratos incompatibles**.  
- Trabaja con **protocolos o formatos antiguos**.  
- Cambia sin control y puede generar **inestabilidad** en tu aplicaci√≥n.  

‚Ä¶ existe el riesgo de que todas esas limitaciones ‚Äúensucien‚Äù el dise√±o interno del nuevo sistema.  
Esto puede provocar:

- Dif√≠cil mantenibilidad.  
- Alto acoplamiento.  
- Propagaci√≥n de errores del sistema externo.  
- Dependencia irreversible del sistema legado.  

El ACL aparece como una barrera protectora para evitar esa dependencia.

---

## Soluci√≥n

El patr√≥n propone crear una **capa intermedia** entre tu sistema y el sistema externo que:

- **Traduce** los datos externos al modelo interno.  
- **A√≠sla** la l√≥gica del negocio de las inconsistencias externas.  
- **Adapta** formatos, contratos y protocolos.  
- **Valida y sanea** datos antes de ingresarlos a tu sistema.  
- **Encapsula** cualquier complejidad del sistema externo en un solo m√≥dulo.

Esta capa puede incluir:

- Mappers  
- Adaptadores  
- Anti-corruption services  
- DTOs para aislar modelos  
- Validadores  
- Transformadores de datos  

De esta forma, el sistema interno mantiene un **modelo limpio, estable y evolutivo**, sin depender de c√≥mo funciona el otro sistema.

---

## Casos de Aplicaci√≥n

### 1: Integraci√≥n con sistemas legados (bancos, ERPs, sistemas del Estado)
Cuando un servicio moderno debe usar un sistema antiguo que trabaja con SOAP, XML o tablas r√≠gidas.

**Ejemplo real:**  
Un banco moderno expone APIs REST, pero debe consultar un core bancario legado basado en COBOL. El ACL traduce las solicitudes REST a la estructura del core.

---

### 2: Integraci√≥n con proveedores externos o APIs inestables
APIs de terceros que cambian frecuentemente, o cuyos contratos no son confiables.

**Ejemplo:**  
Integrarse con APIs de pasarelas de pago (Niubiz, Stripe, PayPal) que tienen modelos distintos.  
El ACL convierte todos los modelos en un **PaymentModel interno unificado**.

---

### 3: Migraciones graduales de sistemas
Cuando la empresa migra hacia microservicios, pero a√∫n necesita conectarse al monolito.

**Ejemplo:**  
El microservicio de ‚ÄúClientes‚Äù consulta datos del monolito, pero su ACL los limpia y reestructura con el Domain Model nuevo.

---

### 4: Integraci√≥n en arquitecturas basadas en dominios (DDD)
DDD lo recomienda expl√≠citamente para **proteger el Domain Model**.

---

## Aplicaci√≥n en el Proyecto Grupal

En el sistema del curso, el ACL se integrar√° para proteger los servicios internos que consumen datos del **Sistema Externo X** (cambiar por nombre real) que:

- Utiliza un modelo inconsistente.  
- Tiene atributos que no calzan con nuestro Domain Model.  
- Devuelve estructuras con valores opcionales, inconsistentes o en formatos complejos.

### ¬øQu√© har√° el ACL en nuestro proyecto?

1. **Crear DTOs externos** para aislar el contrato real del servicio externo.  
2. **Crear Mappers / Translators** para convertir esos DTOs al **modelo interno del m√≥dulo 5**.  
3. **Validar y sanitizar** campos que el servicio externo devuelve incompletos o ambiguos.  
4. **Centralizar la l√≥gica de integraci√≥n** en un solo m√≥dulo aislado.

### Beneficios en el Proyecto

- Evitamos contaminar nuestro Domain Model.  
- Garantizamos que cambios en el sistema externo no afecten todo el m√≥dulo.  
- Mejoramos mantenibilidad y claridad del c√≥digo.  
- Permite reemplazar o modificar el sistema externo sin cambios en los m√≥dulos internos.

---

## Ejemplo aplicado al Proyecto

Un **ACL** para:

- Recibir los datos en el formato externo (propiedades, nombres, estados).  
- Transformarlos a nuestro **PerfilModel interno**.  
- Realizar validaciones extras (campos nulos, normalizaci√≥n de estados).  
- Exponer al resto del m√≥dulo un contrato limpio y estable.

**Antes:**  
El m√≥dulo fallaba cuando el sistema externo devolv√≠a datos incompletos o con otros nombres.

**Despu√©s:**  
Con el ACL, el m√≥dulo siempre recibe una estructura homog√©nea.  
Si el sistema externo cambia, **solo se modifica el ACL, no el dominio**.

---




[‚¨ÖÔ∏è Anterior](../0.7.4/0.7.4.md) | [üè† Home](../../../README.md)
