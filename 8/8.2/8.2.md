> [8. Aplicaci√≥n de Patrones Arquitecturales](../8.md) ‚Ä∫ [8.2. M√≥dulo 2 / Integrante 2](8.2.md)

# 8.2. M√≥dulo 2 / Integrante 2

## Introducci√≥n

El **M√≥dulo 2** implementa un sistema de mensajer√≠a colaborativa en tiempo real basado en **WebSockets**. A diferencia de versiones previas, esta secci√≥n documenta √∫nicamente los patrones arquitect√≥nicos que realmente se aplican en el c√≥digo fuente del repositorio:

- El patr√≥n **Publish‚ÄìSubscribe** para la comunicaci√≥n en tiempo real
- El patr√≥n **Multi-Tier** para la organizaci√≥n l√≥gica y f√≠sica del sistema

Ambos patrones contribuyen a la **interoperabilidad**, **escalabilidad** y **mantenibilidad** del m√≥dulo.

---

## Patr√≥n 1 ‚Äî Publish‚ÄìSubscribe (WebSockets / Socket.io)

### Descripci√≥n del patr√≥n

El patr√≥n **Publish‚ÄìSubscribe** permite que m√∫ltiples consumidores reciban eventos emitidos por un productor sin que exista acoplamiento directo entre ellos. En este m√≥dulo, los clientes se suscriben a salas de WebSocket (Rooms) y reciben mensajes emitidos por el servidor a esos canales.

### Evidencia en el c√≥digo

- `messages.gateway.ts` utiliza decoradores como `@SubscribeMessage()` para gestionar eventos entrantes.
- El servidor difunde eventos mediante `server.to(roomId).emit()`.
- En el cliente m√≥vil (`useWebSocket.ts`), las pantallas se suscriben a eventos mediante `socket.on('new_message', ...)`.

### Tabla de caracterizaci√≥n

| Elemento | Implementaci√≥n |
|----------|---|
| **Publicador** | Servidor WebSocket (Gateway de NestJS) |
| **Suscriptores** | Aplicaci√≥n m√≥vil conectada mediante Socket.io |
| **Canal** | Rooms identificados por `chatId` |
| **Tipo de interacci√≥n** | As√≠ncrona, en tiempo real |
| **Atributo de calidad asociado** | Interoperabilidad y rendimiento |

### Justificaci√≥n

El m√≥dulo requiere difundir mensajes simult√°neamente a m√∫ltiples usuarios en tiempo real. **Publish‚ÄìSubscribe** elimina la necesidad de conexiones directas cliente‚Äìcliente y desacopla los componentes, facilitando la comunicaci√≥n colaborativa.

---

## Patr√≥n 2 ‚Äî Multi-Tier (Arquitectura en Capas)

### Descripci√≥n del patr√≥n

El patr√≥n **Multi-Tier** organiza el sistema en capas separadas, cada una con una responsabilidad distinta. En este m√≥dulo, la aplicaci√≥n est√° separada en capa de presentaci√≥n, capa de aplicaci√≥n y capa de datos.

### Evidencia en el c√≥digo

| Capa | Implementaci√≥n |
|------|---|
| **Presentaci√≥n** | Aplicaci√≥n m√≥vil (React Native) que utiliza `useWebSocket.ts` |
| **L√≥gica de negocio** | Servidor WebSocket en NestJS (`messages.gateway.ts`, `messages.service.ts`) |
| **Datos** | Base de datos MongoDB para persistencia de mensajes |

### Beneficios

- **Facilita la mantenibilidad**: los cambios en UI o backend no afectan a la otra capa.
- **Soporta escalabilidad independiente** por capa.
- **Permite intercambiar tecnolog√≠as** en cada nivel sin romper el resto del sistema.

### Justificaci√≥n

El env√≠o y recepci√≥n de mensajes depende de m√∫ltiples componentes distribuidos. Separarlos en capas mejora la organizaci√≥n y facilita su evoluci√≥n independiente.

---

[‚¨ÖÔ∏è Anterior](../8.1/8.1.md) | [üè† Home](../../README.md) | [Siguiente ‚û°Ô∏è](../8.3/8.3.md)