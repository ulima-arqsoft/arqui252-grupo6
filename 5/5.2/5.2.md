> [5. T√°cticas](../5.md) ‚Ä∫ [5.2. M√≥dulo 2 / Integrante 2](5.2.md)

# 5.2. M√≥dulo 2 / Integrante 2

## Introducci√≥n

El **M√≥dulo 2** implementa el servicio de mensajer√≠a colaborativa en tiempo real utilizando **WebSockets**. Las t√°cticas documentadas a continuaci√≥n corresponden estrictamente a lo que el c√≥digo del repositorio implementa de manera real: detecci√≥n de fallas mediante heartbeat, manejo concurrente de m√∫ltiples conexiones y gesti√≥n de interfaces mediante encapsulaci√≥n de la comunicaci√≥n WebSocket. Estas t√°cticas permiten mejorar **disponibilidad**, **rendimiento** y **mantenibilidad** del m√≥dulo.

---

## T√°ctica 1 ‚Äî Heartbeat para Detecci√≥n de Desconexiones

### Escenario

| Atributo | ID | Fuente del Est√≠mulo | Est√≠mulo | Artefacto | Entorno | Respuesta | Medida de Respuesta | Comentario |
|----------|----|--------------------|----------|-----------|---------|----------|-------------------|-----------|
| **Disponibilidad** | ESC-M2-01 | Cliente WebSocket | P√©rdida de latidos (ping/pong) | Componente `messages.gateway.ts` | Conectividad inestable | El sistema ejecuta `handleDisconnect` al perder heartbeats | Detecci√≥n en un m√°ximo de 3 segundos | Implementado autom√°ticamente por Socket.io |

### T√°ctica Elegida

**Detectar Fallas: Heartbeat**

El servidor WebSocket supervisa el env√≠o peri√≥dico de mensajes **"ping/pong"** (latidos). Si el servidor deja de recibir estos latidos, considera la conexi√≥n como ca√≠da y ejecuta la l√≥gica de desconexi√≥n correspondiente.

### Contexto

Los usuarios pueden experimentar inestabilidad de red. La t√°ctica de **heartbeat** permite detectar desconexiones de forma temprana y mantener la integridad del estado de las sesiones activas.

---

## T√°ctica 2 ‚Äî Introducir Concurrencia para Manejo de M√∫ltiples Conexiones

### Escenario

| Atributo | ID | Fuente del Est√≠mulo | Est√≠mulo | Artefacto | Entorno | Respuesta | Medida de Respuesta | Comentario |
|----------|----|--------------------|----------|-----------|---------|----------|-------------------|-----------|
| **Rendimiento** | ESC-M2-02 | M√∫ltiples usuarios concurrentes | Env√≠o simult√°neo de mensajes | Backend WebSocket basado en NestJS | Carga elevada | El sistema procesa eventos de manera as√≠ncrona sin bloquear el flujo | Latencia estable durante concurrencia | Se apoya en el event-loop de Node.js |

### T√°ctica Elegida

**Rendimiento: Introducir Concurrencia**

El servidor WebSocket utiliza el modelo **as√≠ncrono y no bloqueante** de Node.js para manejar m√∫ltiples conexiones y eventos simult√°neos, asegurando eficiencia y baja latencia durante la interacci√≥n en tiempo real.

### Contexto

La mensajer√≠a en tiempo real implica la llegada simult√°nea de eventos. La **concurrencia** permite atender m√∫ltiples usuarios sin bloquear el hilo principal, mejorando el rendimiento global del m√≥dulo.

---

## T√°ctica 3 ‚Äî Gesti√≥n de Interfaces mediante Encapsulaci√≥n WebSocket

### Escenario

| Atributo | ID | Fuente del Est√≠mulo | Est√≠mulo | Artefacto | Entorno | Respuesta | Medida de Respuesta | Comentario |
|----------|----|--------------------|----------|-----------|---------|----------|-------------------|-----------|
| **Mantenibilidad** | ESC-M2-03 | Desarrollador | Necesidad de modificar o reemplazar la tecnolog√≠a de comunicaci√≥n | Hook `useWebSocket.ts` | Desarrollo y evoluci√≥n del sistema | El cambio se realiza exclusivamente en la capa de interfaz | Modificaci√≥n en menos de un d√≠a | Reduce acoplamiento entre UI y l√≥gica de red |

### T√°ctica Elegida

**Interoperabilidad/Mantenibilidad: Gesti√≥n de Interfaces (Wrapper/Adapter)**

El hook `useWebSocket.ts` act√∫a como intermediario entre la aplicaci√≥n m√≥vil y la infraestructura WebSocket. Encapsula las operaciones de conexi√≥n, env√≠o y recepci√≥n, evitando que los componentes dependan de detalles internos de Socket.io.

### Contexto

La **encapsulaci√≥n** facilita reemplazar Socket.io por otra tecnolog√≠a (como MQTT o Firebase), centralizando cambios en un solo m√≥dulo y manteniendo estable el resto de la aplicaci√≥n.

---

[‚¨ÖÔ∏è Anterior](../5.1/5.1.md) | [üè† Home](../../README.md) | [Siguiente ‚û°Ô∏è](../5.3/5.3.md)
