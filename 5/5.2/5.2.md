> [5. T√°cticas](../5.md) ‚Ä∫ [5.2. M√≥dulo 2 / Integrante 2](5.2.md)

# 5.4. M√≥dulo 2 / Integrante 2
# 5.4. üß© T√°cticas del M√≥dulo 2 ‚Äî Colaboraci√≥n de Ideas

---

## üß† Introducci√≥n
El M√≥dulo 2 implementa funcionalidades de **mensajer√≠a colaborativa**, **subchats**, **sincronizaci√≥n en tiempo real** y **control de roles**.  
Las siguientes t√°cticas arquitect√≥nicas aseguran que el sistema mantenga **disponibilidad, rendimiento, seguridad y escalabilidad** ante escenarios de alta concurrencia y desconexi√≥n.

---

## ‚öôÔ∏è T√°ctica 1: Autoguardado Local y Reintento Autom√°tico
**Escenario asociado:** ESC-21 (Disponibilidad)  
**Objetivo:** Mantener los mensajes del usuario aunque se pierda la conexi√≥n.

**Descripci√≥n:**  
Cuando un colaborador pierde conexi√≥n, los mensajes pendientes se guardan temporalmente en almacenamiento local (IndexedDB/LocalStorage) junto con su marca de tiempo.  
Al restablecer la conexi√≥n, el cliente reenv√≠a autom√°ticamente los mensajes no sincronizados.

**Aplicaci√≥n T√©cnica:**  
- `Socket.IO` con middleware de reconexi√≥n autom√°tica.  
- Buffer de reenv√≠o local mediante `IndexedDB`.  
- Confirmaci√≥n de entrega con ACK por cada mensaje enviado.

**Atributo de Calidad Reforzado:** Disponibilidad.

---

## ‚öôÔ∏è T√°ctica 2: Sincronizaci√≥n Multi-Dispositivo en Tiempo Real
**Escenario asociado:** ESC-22 (Interoperabilidad)  
**Objetivo:** Reflejar mensajes y archivos instant√°neamente en todos los dispositivos del mismo usuario.

**Descripci√≥n:**  
Cada usuario puede iniciar sesi√≥n desde varios dispositivos (web y m√≥vil).  
El servidor propaga los eventos de mensajes y estados de lectura a todas las sesiones activas mediante un identificador √∫nico de usuario.

**Aplicaci√≥n T√©cnica:**  
- Canal de comunicaci√≥n persistente con `Socket.IO` Rooms.  
- Identificador de sesi√≥n por `UserID`.  
- Redis Pub/Sub para sincronizar eventos entre nodos del servidor.

**Atributo de Calidad Reforzado:** Interoperabilidad.

---

## ‚öôÔ∏è T√°ctica 3: Uso de Colas de Mensajes en Memoria (Redis)
**Escenario asociado:** ESC-24 (Rendimiento)  
**Objetivo:** Garantizar baja latencia y procesamiento paralelo durante picos de mensajes.

**Descripci√≥n:**  
Los mensajes enviados por los usuarios se enrutan a una cola temporal en Redis.  
El backend procesa cada mensaje de forma as√≠ncrona y lo entrega a los destinatarios, evitando bloqueos en el hilo principal.

**Aplicaci√≥n T√©cnica:**  
- Redis Streams para encolar mensajes.  
- Worker Threads para consumo paralelo.  
- Confirmaci√≥n de entrega mediante IDs incrementales.

**Atributo de Calidad Reforzado:** Rendimiento.

---

## ‚öôÔ∏è T√°ctica 4: Autenticaci√≥n JWT con Roles de Colaborador
**Escenario asociado:** ESC-25 y ESC-29 (Seguridad)  
**Objetivo:** Controlar el acceso a los canales de colaboraci√≥n y restringir acciones seg√∫n el rol.

**Descripci√≥n:**  
Cada conexi√≥n WebSocket se autentica mediante un token JWT que contiene los roles (creador, colaborador, moderador).  
Un middleware valida el token y determina los permisos de lectura, env√≠o o administraci√≥n.

**Aplicaci√≥n T√©cnica:**  
- Middleware de Express + Socket.IO.  
- Tokens firmados con claves RSA.  
- Expiraci√≥n controlada y revocaci√≥n inmediata en caso de salida del proyecto.

**Atributo de Calidad Reforzado:** Seguridad.

---

## ‚öôÔ∏è T√°ctica 5: Notificaciones Agrupadas por Prioridad
**Escenario asociado:** ESC-26 (Usabilidad)  
**Objetivo:** Reducir el exceso de alertas simult√°neas y mejorar la experiencia del usuario.

**Descripci√≥n:**  
El sistema clasifica cada notificaci√≥n (mensaje, menci√≥n, invitaci√≥n) por prioridad.  
Se agrupan las de menor relevancia en lotes, mientras que las cr√≠ticas se env√≠an inmediatamente.

**Aplicaci√≥n T√©cnica:**  
- Redis Sorted Sets para clasificaci√≥n.  
- Emisor Socket.IO ‚Äúnotifications‚Äù con batch de eventos cada 30 s.  
- Filtro de usuario configurable (silenciar chats).

**Atributo de Calidad Reforzado:** Usabilidad.

---

## ‚öôÔ∏è T√°ctica 6: Registro Hist√≥rico y Auditor√≠a de Chats
**Escenario asociado:** ESC-28 (Trazabilidad)  
**Objetivo:** Mantener un historial ordenado y verificable de las conversaciones.

**Descripci√≥n:**  
Cada mensaje persistido en SQL Server incluye metadata (autor, hora, canal, tipo).  
El sistema genera consultas filtradas por proyecto y rango de fechas, visibles desde el perfil del colaborador.

**Aplicaci√≥n T√©cnica:**  
- Almacenamiento hist√≥rico en SQL Server.  
- Indexaci√≥n por `ChatID` y `Timestamp`.  
- API de consulta `/historial/:id`.

**Atributo de Calidad Reforzado:** Trazabilidad.

---

## ‚öôÔ∏è T√°ctica 7: Escalado Horizontal y Balanceo de Carga
**Escenario asociado:** ESC-30 (Escalabilidad)  
**Objetivo:** Permitir que el chat soporte miles de conexiones simult√°neas sin degradar el rendimiento.

**Descripci√≥n:**  
El m√≥dulo se ejecuta en varias instancias de Node.js administradas por PM2 Cluster, detr√°s de un balanceador Nginx.  
Las conexiones WebSocket se distribuyen mediante `socket.io-redis-adapter`.

**Aplicaci√≥n T√©cnica:**  
- PM2 Cluster Mode.  
- Nginx Load Balancer (round-robin).  
- Redis Adapter para sincronizar eventos entre instancias.

**Atributo de Calidad Reforzado:** Escalabilidad.

---

## ‚öôÔ∏è T√°ctica 8: Actualizaci√≥n Modular y Extensible de Roles
**Escenario asociado:** ESC-27 (Mantenibilidad)  
**Objetivo:** Permitir agregar nuevos tipos de rol sin alterar la base del sistema.




[‚¨ÖÔ∏è Anterior](../5.1/5.1.md) | [üè† Home](../../README.md) | [Siguiente ‚û°Ô∏è](../5.3/5.3.md)



