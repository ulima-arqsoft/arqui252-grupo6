> [5. T√°cticas](../5.md) ‚Ä∫ [5.2. M√≥dulo 2 / Integrante 2](5.2.md)

# 5.4. M√≥dulo 2 / Integrante 2

## üß† Introducci√≥n
El M√≥dulo 2 implementa funcionalidades de **mensajer√≠a colaborativa**, **subchats**, **sincronizaci√≥n en tiempo real** y **control de roles**.  
Las siguientes t√°cticas arquitect√≥nicas aseguran que el sistema mantenga **disponibilidad, rendimiento, seguridad y escalabilidad** ante escenarios de alta concurrencia y desconexi√≥n.

---

## ‚öôÔ∏è T√°ctica 1 ‚Äî Autoguardado Local y Reintento Autom√°tico

### Escenario
| Atributo | ID Escenario | Fuente Est√≠mulo | Est√≠mulo | Artefacto | Entorno | Respuesta | Medida de Respuesta | Comentario |
|-----------|--------------|----------------|-----------|-------------|-----------|-------------|----------------|-------------|
| Disponibilidad | ESC-21 | Colaborador con conexi√≥n inestable | P√©rdida de conectividad durante la colaboraci√≥n de mensajes | M√≥dulo de Colaboraci√≥n de Ideas | Uso normal con intermitencias de red | Los mensajes pendientes se guardan en memoria local y se reenv√≠an autom√°ticamente al reconectarse | Reenv√≠o en ‚â§ 5 s tras reconexi√≥n | Evita p√©rdida de mensajes y mantiene la continuidad de la colaboraci√≥n |

### T√°ctica Elegida
La t√°ctica elegida es **Almacenamiento Temporal Local con Reintento Autom√°tico**, que permite conservar los mensajes no entregados en `IndexedDB/LocalStorage` y reenviarlos al restablecer la conexi√≥n.

### T√≠tulo
**T√°ctica de Autoguardado Local para Garantizar la Recuperaci√≥n de Mensajes (ESC-21)**

### Contexto
Durante sesiones de colaboraci√≥n, los usuarios pueden redactar mensajes largos o enviar archivos que no deben perderse por desconexiones breves.  
Esta t√°ctica utiliza **Socket.IO** con middleware de reconexi√≥n y buffer local, asegurando que el contenido no se pierda y se reemita en segundos, preservando la disponibilidad.

---

## ‚öôÔ∏è T√°ctica 2 ‚Äî Sincronizaci√≥n Multi-Dispositivo en Tiempo Real

### Escenario
| Atributo | ID Escenario | Fuente Est√≠mulo | Est√≠mulo | Artefacto | Entorno | Respuesta | Medida de Respuesta | Comentario |
|-----------|--------------|----------------|-----------|-------------|-----------|-------------|----------------|-------------|
| Interoperabilidad | ESC-22 | Usuario autenticado en m√∫ltiples dispositivos | Env√≠o o recepci√≥n de mensaje desde otro equipo | M√≥dulo de Colaboraci√≥n de Ideas | Sesi√≥n activa en varios clientes (web y m√≥vil) | El mensaje se replica instant√°neamente en todas las sesiones del usuario | Latencia ‚â§ 2 s entre dispositivos | Garantiza consistencia de estado y fluidez colaborativa |

### T√°ctica Elegida
**Sincronizaci√≥n Distribuida con Pub/Sub y Socket.IO Rooms**, que propaga eventos de mensaje a todas las instancias activas del mismo usuario utilizando **Redis Pub/Sub**.

### T√≠tulo
**T√°ctica de Sincronizaci√≥n Multi-Dispositivo en Tiempo Real (ESC-22)**

### Contexto
Los usuarios pueden colaborar desde diferentes dispositivos.  
Para mantener la coherencia de la conversaci√≥n, el servidor asigna un identificador √∫nico por usuario y distribuye los eventos a todas sus sesiones activas, reforzando la interoperabilidad y la experiencia fluida.

---

## ‚öôÔ∏è T√°ctica 3 ‚Äî Uso de Colas de Mensajes en Memoria (Redis)

### Escenario
| Atributo | ID Escenario | Fuente Est√≠mulo | Est√≠mulo | Artefacto | Entorno | Respuesta | Medida de Respuesta | Comentario |
|-----------|--------------|----------------|-----------|-------------|-----------|-------------|----------------|-------------|
| Rendimiento | ESC-24 | Usuarios en alta concurrencia de mensajes | Pico de actividad en canales simult√°neos | Servidor de Mensajer√≠a | Entorno de carga intensa | Los mensajes se encolan y procesan as√≠ncronamente para mantener baja latencia | Tiempo de procesamiento ‚â§ 1 s por mensaje | Permite flujo constante sin bloqueos del hilo principal |

### T√°ctica Elegida
**Colas en Memoria con Redis Streams y Worker Threads**, que permite procesamiento paralelo de mensajes durante picos de carga.

### T√≠tulo
**T√°ctica de Colas de Mensajes en Memoria para Optimizar el Rendimiento (ESC-24)**

### Contexto
El volumen de mensajes en proyectos colaborativos puede ser muy alto.  
La cola Redis reduce la carga del proceso principal y mantiene la respuesta √°gil, asegurando rendimiento en condiciones de alta concurrencia.

---

## ‚öôÔ∏è T√°ctica 4 ‚Äî Autenticaci√≥n JWT con Roles de Colaborador

### Escenario
| Atributo | ID Escenario | Fuente Est√≠mulo | Est√≠mulo | Artefacto | Entorno | Respuesta | Medida de Respuesta | Comentario |
|-----------|--------------|----------------|-----------|-------------|-----------|-------------|----------------|-------------|
| Seguridad | ESC-25 / ESC-29 | Solicitud de acceso a canal colaborativo | Usuario sin rol o token inv√°lido intenta enviar mensaje | API de Colaboraci√≥n (WebSocket) | Uso normal con m√∫ltiples roles | Middleware valida token JWT y restringe acciones seg√∫n rol | Respuesta ‚â§ 300 ms | Previene accesos no autorizados y preserva la integridad del chat |

### T√°ctica Elegida
**Autenticaci√≥n JWT con Validaci√≥n de Roles**, donde cada token contiene roles y permisos del usuario (verificados en cada conexi√≥n).

### T√≠tulo
**T√°ctica de Control de Acceso con Tokens JWT (ESC-25/ESC-29)**

### Contexto
El m√≥dulo requiere que solo usuarios autorizados participen seg√∫n sus permisos (creador, colaborador, moderador).  
La autenticaci√≥n por JWT refuerza la seguridad en tiempo real y simplifica la revocaci√≥n de sesiones activas.

---

## ‚öôÔ∏è T√°ctica 5 ‚Äî Notificaciones Agrupadas por Prioridad

### Escenario
| Atributo | ID Escenario | Fuente Est√≠mulo | Est√≠mulo | Artefacto | Entorno | Respuesta | Medida de Respuesta | Comentario |
|-----------|--------------|----------------|-----------|-------------|-----------|-------------|----------------|-------------|
| Usabilidad | ESC-26 | Usuario recibe m√∫ltiples notificaciones simult√°neas | Flujo constante de eventos bajos y altos | Sistema de Notificaciones | Entorno activo con alta interacci√≥n | Se agrupan notificaciones de baja prioridad y las cr√≠ticas se env√≠an de inmediato | Entrega por lotes cada ‚â§ 30 s | Mejora la experiencia del usuario al reducir interrupciones |

### T√°ctica Elegida
**Clasificaci√≥n y Agrupamiento por Prioridad en Redis Sorted Sets**, gestionando env√≠os seg√∫n importancia y frecuencia.

### T√≠tulo
**T√°ctica de Notificaciones Agrupadas por Prioridad (ESC-26)**

### Contexto
La sobrecarga de alertas puede dificultar el uso de la plataforma.  
El agrupamiento permite un equilibrio entre informaci√≥n √∫til y fluidez visual, reforzando la usabilidad y la percepci√≥n de orden en el sistema.

---

## ‚öôÔ∏è T√°ctica 6 ‚Äî Registro Hist√≥rico y Auditor√≠a de Chats

### Escenario
| Atributo | ID Escenario | Fuente Est√≠mulo | Est√≠mulo | Artefacto | Entorno | Respuesta | Medida de Respuesta | Comentario |
|-----------|--------------|----------------|-----------|-------------|-----------|-------------|----------------|-------------|
| Trazabilidad | ESC-28 | Solicitud de revisi√≥n de mensajes | Usuario requiere consultar historial de conversaciones | M√≥dulo de Colaboraci√≥n de Ideas | Uso normal y auditor√≠as internas | El sistema almacena mensajes con metadata y permite consultas por proyecto y fecha | Recuperaci√≥n ‚â§ 2 s por consulta | Facilita verificaci√≥n de interacciones y auditor√≠a posterior |

### T√°ctica Elegida
**Persistencia Hist√≥rica en SQL Server con Metadata de Mensajes**, indexando por `ChatID` y `Timestamp`.

### T√≠tulo
**T√°ctica de Registro Hist√≥rico y Auditor√≠a de Mensajes (ESC-28)**

### Contexto
Para garantizar transparencia y trazabilidad, todas las interacciones se persisten con atributos clave (autor, hora, canal).  
Esto permite consultas eficientes y rastreabilidad completa de las conversaciones.

---

## ‚öôÔ∏è T√°ctica 7 ‚Äî Escalado Horizontal y Balanceo de Carga

### Escenario
| Atributo | ID Escenario | Fuente Est√≠mulo | Est√≠mulo | Artefacto | Entorno | Respuesta | Medida de Respuesta | Comentario |
|-----------|--------------|----------------|-----------|-------------|-----------|-------------|----------------|-------------|
| Escalabilidad | ESC-30 | Aumento de usuarios conectados | Pico de conexiones simult√°neas | Backend de Colaboraci√≥n | Producci√≥n con alto tr√°fico | Las instancias Node.js se distribuyen en varios nodos con balanceo Nginx | Soporte de ‚â• 5000 conexiones simult√°neas | Permite crecimiento sin afectar rendimiento ni latencia |

### T√°ctica Elegida
**Escalado Horizontal con PM2 Cluster y Nginx Load Balancer**, sincronizado mediante `socket.io-redis-adapter`.

### T√≠tulo
**T√°ctica de Escalado Horizontal y Balanceo de Carga (ESC-30)**

### Contexto
El sistema requiere responder a miles de usuarios simult√°neamente.  
El balanceo round-robin distribuye las sesiones y Redis coordina los eventos entre instancias, reforzando la escalabilidad y estabilidad del servicio.

---

## ‚öôÔ∏è T√°ctica 8 ‚Äî Actualizaci√≥n Modular y Extensible de Roles

### Escenario
| Atributo | ID Escenario | Fuente Est√≠mulo | Est√≠mulo | Artefacto | Entorno | Respuesta | Medida de Respuesta | Comentario |
|-----------|--------------|----------------|-----------|-------------|-----------|-------------|----------------|-------------|
| Mantenibilidad | ESC-27 | Solicitud de nueva pol√≠tica de roles | Requerimiento de a√±adir nuevo tipo de rol al sistema | M√≥dulo de Gesti√≥n de Roles Colaborativos | Desarrollo evolutivo | El sistema permite a√±adir roles sin modificar el n√∫cleo existente | Integraci√≥n de nuevo rol ‚â§ 1 d√≠a | Reduce impacto en el c√≥digo base y facilita extensiones futuras |

### T√°ctica Elegida
**Dise√±o Modular de Roles con Enumeraciones y Middlewares Extensibles**, que permite agregar roles sin alterar el modelo existente.

### T√≠tulo
**T√°ctica de Actualizaci√≥n Modular y Extensible de Roles (ESC-27)**

### Contexto
La evoluci√≥n de la plataforma exige incorporar nuevos roles sin afectar las funciones ya implementadas.  
Un modelo basado en enumeraciones y middlewares separados garantiza mantenibilidad y reutilizaci√≥n de c√≥digo.

---

[‚¨ÖÔ∏è Anterior](../5.1/5.1.md) | [üè† Home](../../README.md) | [Siguiente ‚û°Ô∏è](../5.3/5.3.md)
