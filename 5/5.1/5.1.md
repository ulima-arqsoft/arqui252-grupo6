> [5. T√°cticas](../5.md) ‚Ä∫ [5.1. M√≥dulo 1 / Integrante 1](5.1.md)

# 5.1. M√≥dulo 1 / Integrante 1

## Escenario
| Atributo | ID Escenario | Fuente Est√≠mulo | Est√≠mulo | Artefacto | Entorno | Respuesta | Medida de Respuesta | Comentario |
| :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: |
| **Rendimiento** | **ESC-01** | Usuario realizando b√∫squeda | Usuario ejecuta b√∫squeda con palabra clave en base con 10k ideas | Motor de b√∫squeda del M√≥dulo de B√∫squeda de Ideas | Base de datos con 10,000 ideas indexadas | El sistema devuelve resultados ordenados por relevancia | Tiempo de respuesta p95 ‚â§ 1 seg | Garantiza experiencia fluida en b√∫squedas b√°sicas |

### T√°ctica Elegida
La t√°ctica elegida es **Introducir Concurrencia**, espec√≠ficamente mediante el uso de √≠ndices invertidos y procesamiento paralelo de consultas.

**T√≠tulo**:
- T√°ctica de Indexaci√≥n Avanzada con Elasticsearch para Optimizaci√≥n de B√∫squedas (ESC-01).

**Contexto**:
- Los usuarios de NEXUS necesitan encontrar ideas relevantes r√°pidamente mediante palabras clave (HU001). El requisito funcional **RF001** exige un tiempo de respuesta p95 ‚â§ 1s con 10k ideas. Las b√∫squedas full-text en bases de datos relacionales o b√∫squedas secuenciales son insuficientes para cumplir esta m√©trica bajo carga concurrente.

**Alternativas**:
1. **Introducir Concurrencia (√çndices Invertidos + Procesamiento Paralelo)**:
    - Utilizar Elasticsearch con √≠ndices invertidos que permiten b√∫squedas full-text en tiempo casi constante O(1) para la localizaci√≥n de t√©rminos. El motor distribuye la consulta entre m√∫ltiples shards procesados en paralelo.
    - Proporciona b√∫squedas sub-segundo incluso con millones de documentos, scoring de relevancia avanzado (BM25).
2. **Incrementar Recursos Disponibles (Escalamiento Vertical)**:
    - Aumentar CPU y RAM del servidor de base de datos para acelerar consultas secuenciales.
    - Limitado por capacidad m√°xima del hardware, no resuelve el problema algor√≠tmico de b√∫squeda full-text.

**Criterios de Elecci√≥n**:
- Cumplir con m√©trica de rendimiento p95 ‚â§ 1s bajo carga concurrente.
- Escalabilidad horizontal para crecimiento futuro.
- Calidad de resultados con scoring de relevancia.

**Decisi√≥n**:
- Se elige la t√°ctica de **Introducir Concurrencia** mediante Elasticsearch con arquitectura de sharding y r√©plicas.

**Sustento**:
- Los **√≠ndices invertidos** de Elasticsearch permiten localizar documentos que contienen t√©rminos espec√≠ficos en tiempo casi constante. El procesamiento distribuido entre shards procesa la consulta en paralelo, agregando resultados finales. Con 3 shards primarios y 2 r√©plicas, el sistema puede procesar b√∫squedas concurrentes eficientemente, garantizando el **p95 ‚â§ 1s** requerido por RF001. Esta arquitectura escala horizontalmente agregando m√°s nodos al cl√∫ster.

---

## Escenario
| Atributo | ID Escenario | Fuente Est√≠mulo | Est√≠mulo | Artefacto | Entorno | Respuesta | Medida de Respuesta | Comentario |
| :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: |
| **Disponibilidad** | **ESC-03** | Usuario con conexi√≥n inestable | Usuario pierde conectividad durante una b√∫squeda activa | M√≥dulo de B√∫squeda de Ideas | Uso normal con conexi√≥n intermitente | El sistema mantiene cach√© local y restaura estado al reconectarse | Restauraci√≥n de estado ‚â§ 3 seg tras reconexi√≥n | Evita frustraci√≥n y p√©rdida de contexto de b√∫squeda |

### T√°ctica Elegida
La t√°ctica elegida es **Manejo de Excepciones**, espec√≠ficamente mediante estrategias de reintentos y almacenamiento local de estado.

**T√≠tulo**:
- Implementaci√≥n de Cach√© Local y Estrategia de Reintentos para Resiliencia ante Desconexiones (ESC-03).

**Contexto**:
- Los usuarios m√≥viles de NEXUS pueden experimentar conectividad intermitente (HU006). Perder el contexto de b√∫squeda (filtros aplicados, scroll position, t√©rminos ingresados) genera frustraci√≥n. El sistema debe restaurar el estado completo en ‚â§ 3 seg tras reconexi√≥n.

**Alternativas**:
1. **Manejo de Excepciones (Reintentos + Estado Local)**:
    - La aplicaci√≥n cliente almacena el estado de b√∫squeda (query, filtros, p√°gina actual) en Local Storage/IndexedDB. Al detectar reconexi√≥n, reintenta la consulta autom√°ticamente con exponential backoff.
    - Restauraci√≥n inmediata del contexto, experiencia fluida sin intervenci√≥n del usuario.
2. **Sincronizaci√≥n (Estado en Servidor)**:
    - Mantener sesi√≥n de b√∫squeda en servidor con sincronizaci√≥n peri√≥dica.
    - Mayor complejidad, requiere autenticaci√≥n persistente, mayor latencia de restauraci√≥n.

**Criterios de Elecci√≥n**:
- Velocidad de restauraci√≥n ‚â§ 3 seg tras reconexi√≥n.
- Independencia de disponibilidad del servidor durante desconexi√≥n.
- Simplicidad de implementaci√≥n en cliente m√≥vil.

**Decisi√≥n**:
- Se elige la t√°ctica de **Manejo de Excepciones** mediante almacenamiento local de estado y reintentos autom√°ticos con exponential backoff.

**Sustento**:
- Al almacenar el estado de b√∫squeda (query, filtros activos, resultados visualizados, scroll position) en **Local Storage** del navegador o **AsyncStorage** en React Native, la aplicaci√≥n puede restaurar inmediatamente la UI al detectar reconexi√≥n. La estrategia de reintentos (3 intentos con delays de 1s, 2s, 4s) permite recuperar datos actualizados del servidor mientras muestra datos cacheados. Esta arquitectura garantiza **restauraci√≥n ‚â§ 3s** y proporciona experiencia offline-first alineada con PWA best practices.

---

## Escenario
| Atributo | ID Escenario | Fuente Est√≠mulo | Est√≠mulo | Artefacto | Entorno | Respuesta | Medida de Respuesta | Comentario |
| :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: |
| **Seguridad** | **ESC-04** | Usuario autenticado | Usuario intenta acceder a ideas privadas/compartidas | Sistema de control de acceso del m√≥dulo | M√∫ltiples niveles de visibilidad activos | El sistema filtra resultados seg√∫n permisos del usuario | 100% de ideas respetan visibilidad configurada | Protege privacidad y confidencialidad de ideas |

### T√°ctica Elegida
La t√°ctica elegida es **Limitar el Acceso**, espec√≠ficamente mediante filtros de seguridad a nivel de consulta (Row-Level Security).

**T√≠tulo**:
- Implementaci√≥n de Filtrado de Visibilidad a Nivel de Consulta para Garantizar Seguridad (ESC-04).

**Contexto**:
- NEXUS maneja tres niveles de visibilidad: p√∫blica, privada y compartida (RF007). El requisito cr√≠tico es que **100% de ideas respeten su configuraci√≥n de visibilidad** en todo momento. Un error de seguridad podr√≠a exponer ideas confidenciales y destruir la confianza en la plataforma.

**Alternativas**:
1. **Limitar el Acceso (Filtros de Seguridad a Nivel de Consulta)**:
    - Inyectar autom√°ticamente cl√°usulas de filtrado en todas las consultas a Elasticsearch basadas en el contexto de seguridad del usuario autenticado: `(visibility:public OR owner_id:{user_id} OR shared_with:{user_id})`.
    - Garant√≠a de seguridad a nivel de datos, imposible bypassear desde cliente.
2. **Autorizar (Verificaci√≥n Post-Consulta)**:
    - Obtener todos los resultados y filtrar en capa de aplicaci√≥n.
    - Ineficiente, paginaci√≥n incorrecta, mayor latencia, riesgo de fugas si hay bug en c√≥digo de aplicaci√≥n.

**Criterios de Elecci√≥n**:
- Garant√≠a absoluta de seguridad (100% compliance).
- Performance sin degradaci√≥n significativa.
- Imposibilidad de bypass por errores en cliente.

**Decisi√≥n**:
- Se elige la t√°ctica de **Limitar el Acceso** mediante filtros de seguridad inyectados autom√°ticamente a nivel de consulta Elasticsearch.

**Sustento**:
- Implementando un **Security Context Interceptor** en el microservicio de b√∫squeda, todas las consultas a Elasticsearch incluyen autom√°ticamente las cl√°usulas de visibilidad basadas en el JWT del usuario. El √≠ndice de Elasticsearch contiene campos `visibility`, `owner_id` y `shared_with[]` sincronizados desde MongoDB v√≠a Change Streams. Los filtros booleanos de Elasticsearch son extremadamente eficientes (filtro en cached segments), garantizando **100% compliance** sin degradaci√≥n de performance, cumpliendo ESC-04.

---

## Escenario
| Atributo | ID Escenario | Fuente Est√≠mulo | Est√≠mulo | Artefacto | Entorno | Respuesta | Medida de Respuesta | Comentario |
| :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: |
| **Usabilidad** | **ESC-06** | Usuario en dispositivo m√≥vil | Usuario navega resultados y aplica filtros desde pantalla peque√±a | Interfaz responsive del M√≥dulo de B√∫squeda | Dispositivo m√≥vil con pantalla < 6" | Interfaz adaptada con filtros colapsables y navegaci√≥n t√°ctil optimizada | 100% funcionalidades accesibles, tap targets ‚â• 44px | Fundamental para accesibilidad m√≥vil |

### T√°ctica Elegida
La t√°ctica elegida es **Separar Interfaz de Usuario del Resto del Sistema**, aplicando el patr√≥n de dise√±o responsive con componentes adaptativos.

**T√≠tulo**:
- Implementaci√≥n de Dise√±o Responsive con Mobile-First Approach para Usabilidad M√≥vil (ESC-06).

**Contexto**:
- Los usuarios de NEXUS acceden desde diversos dispositivos, siendo m√≥viles (< 6") una porci√≥n significativa. El requisito **HU005** y **ESC-06** exigen que el 100% de funcionalidades sean accesibles en m√≥vil con tap targets ‚â• 44px seg√∫n est√°ndares de accesibilidad. Los filtros complejos (categor√≠a, tags, habilidades) deben ser usables en pantallas peque√±as.

**Alternativas**:
1. **Separar Interfaz de Usuario (Responsive Design + Componentes Adaptativos)**:
    - Implementar dise√±o mobile-first con Tailwind CSS y componentes React que se adaptan seg√∫n viewport. Filtros se presentan en modal/drawer colapsable en m√≥vil, expandido en desktop.
    - Experiencia optimizada por dispositivo, misma base de c√≥digo, mantenibilidad alta.
2. **Desarrollar Aplicaciones Nativas Separadas**:
    - Crear aplicaciones nativas espec√≠ficas para iOS/Android con UI optimizada.
    - Mayor costo de desarrollo y mantenimiento, requiere equipos especializados por plataforma.

**Criterios de Elecci√≥n**:
- Accesibilidad completa (100% funcionalidades) en dispositivos m√≥viles.
- Cumplimiento de est√°ndares de usabilidad (tap targets ‚â• 44px).
- Eficiencia en desarrollo y mantenimiento.

**Decisi√≥n**:
- Se elige la t√°ctica de **Separar Interfaz de Usuario** mediante dise√±o responsive con enfoque mobile-first.

**Sustento**:
- Implementando **React Native Web** con Tailwind CSS, la aplicaci√≥n detecta viewport y adapta la UI autom√°ticamente. En m√≥vil (< 768px): filtros se presentan en **drawer deslizable** activado por bot√≥n flotante, resultados en cards verticales optimizadas para scroll t√°ctil, tap targets de m√≠nimo 44x44px seg√∫n WCAG 2.1. En desktop: filtros en sidebar lateral fija, resultados en grid multi-columna. Los componentes compartidos (SearchBar, ResultCard, FilterGroup) encapsulan l√≥gica responsive, garantizando **100% funcionalidades accesibles** en cualquier dispositivo, cumpliendo ESC-06.

---

## Escenario
| Atributo | ID Escenario | Fuente Est√≠mulo | Est√≠mulo | Artefacto | Entorno | Respuesta | Medida de Respuesta | Comentario |
| :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: |
| **Modificabilidad** | **ESC-08** | Equipo de desarrollo | Se requiere agregar nuevo tipo de filtro (ej: ubicaci√≥n geogr√°fica) | C√≥digo fuente del M√≥dulo de B√∫squeda | Evoluci√≥n del sistema | Arquitectura permite extensi√≥n sin modificar l√≥gica existente | Implementaci√≥n ‚â§ 2 d√≠as, 0% regresi√≥n | Facilita evoluci√≥n y adici√≥n de funcionalidades |

### T√°ctica Elegida
La t√°ctica elegida es **Aumentar Cohesi√≥n Sem√°ntica**, espec√≠ficamente mediante el patr√≥n Strategy y Plugin Architecture para filtros.

**T√≠tulo**:
- Implementaci√≥n de Arquitectura de Plugins para Filtros Extensibles (ESC-08).

**Contexto**:
- NEXUS necesita evolucionar continuamente agregando nuevos tipos de filtros seg√∫n las necesidades de los usuarios (ubicaci√≥n, presupuesto, fecha l√≠mite). El requisito **ESC-08** exige que agregar un nuevo filtro tome ‚â§ 2 d√≠as sin causar regresiones. La arquitectura actual debe facilitar esta extensibilidad.

**Alternativas**:
1. **Aumentar Cohesi√≥n Sem√°ntica (Patr√≥n Strategy + Plugin Architecture)**:
    - Definir una interfaz `FilterStrategy` que cada tipo de filtro implementa. El motor de b√∫squeda aplica filtros de manera polim√≥rfica. Nuevos filtros se agregan como plugins sin modificar c√≥digo core.
    - Extensibilidad sin modificar c√≥digo existente (Open/Closed Principle), testing aislado de cada filtro.
2. **C√≥digo Monol√≠tico con Condicionales**:
    - Agregar cada nuevo filtro mediante if/switch statements en el c√≥digo principal.
    - Requiere modificar m√∫ltiples archivos, alto riesgo de regresi√≥n, testing completo necesario.

**Criterios de Elecci√≥n**:
- Tiempo de implementaci√≥n ‚â§ 2 d√≠as para nuevo filtro.
- Riesgo de regresi√≥n minimizado (0%).
- Facilidad de testing de nuevas funcionalidades.

**Decisi√≥n**:
- Se elige la t√°ctica de **Aumentar Cohesi√≥n Sem√°ntica** mediante arquitectura de plugins con patr√≥n Strategy.

**Sustento**:
- Definiendo una interfaz `FilterStrategy` con m√©todos `apply(query, params)` y `validate(params)`, cada tipo de filtro (CategoryFilter, TagFilter, SkillFilter) implementa su l√≥gica de manera aislada. El **FilterEngine** aplica todos los filtros activos iterando sobre la colecci√≥n de strategies registradas. Para agregar filtro de ubicaci√≥n: (1) Crear clase `LocationFilter implements FilterStrategy` (4 horas), (2) Registrar en FilterRegistry (30 min), (3) Tests unitarios (2 horas), (4) Documentaci√≥n (1 hora). Total: **< 1 d√≠a**, con **0% regresi√≥n** ya que no se modifica c√≥digo existente, cumpliendo ESC-08.


---
[üè† Home](../../README.md) | [Siguiente ‚û°Ô∏è](../5.2/5.2.md)