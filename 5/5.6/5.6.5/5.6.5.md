> [5. T√°cticas](../../5.md) ‚Ä∫ [5.6. Listado Consolidado](../5.6.md) ‚Ä∫ [5.6.5. T√°cticas de Seguridad](5.6.5.md)

# 5.6.5. T√°cticas de Seguridad

## Escenario
| Atributo | ID Escenario | Fuente Est√≠mulo | Est√≠mulo | Artefacto | Entorno | Respuesta | Medida de Respuesta | Comentario |
| :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: |
| **Seguridad** | **ESC-04** | Usuario autenticado | Usuario intenta acceder a ideas privadas/compartidas | Sistema de control de acceso del m√≥dulo | M√∫ltiples niveles de visibilidad activos | El sistema filtra resultados seg√∫n permisos del usuario | 100% de ideas respetan visibilidad configurada | Protege privacidad y confidencialidad de ideas |

### T√°ctica Elegida
La t√°ctica elegida es **Limitar el Acceso**, espec√≠ficamente mediante filtros de seguridad a nivel de consulta (Row-Level Security).

**T√≠tulo**:
- Implementaci√≥n de Filtrado de Visibilidad a Nivel de Consulta para Garantizar Seguridad (ESC-04).

**Contexto**:
- NEXUS maneja tres niveles de visibilidad: p√∫blica, privada y compartida (RF007). El requisito cr√≠tico es que **100% de ideas respeten su configuraci√≥n de visibilidad** en todo momento. Un error de seguridad podr√≠a exponer ideas confidenciales y destruir la confianza en la plataforma.

**Alternativas**:
1. **Limitar el Acceso (Filtros de Seguridad a Nivel de Consulta)**:
    - Inyectar autom√°ticamente cl√°usulas de filtrado en todas las consultas a Elasticsearch basadas en el contexto de seguridad del usuario autenticado: `(visibility:public OR owner_id:{user_id} OR shared_with:{user_id})`.
    - Garant√≠a de seguridad a nivel de datos, imposible bypassear desde cliente.
2. **Autorizar (Verificaci√≥n Post-Consulta)**:
    - Obtener todos los resultados y filtrar en capa de aplicaci√≥n.
    - Ineficiente, paginaci√≥n incorrecta, mayor latencia, riesgo de fugas si hay bug en c√≥digo de aplicaci√≥n.

**Criterios de Elecci√≥n**:
- Garant√≠a absoluta de seguridad (100% compliance).
- Performance sin degradaci√≥n significativa.
- Imposibilidad de bypass por errores en cliente.

**Decisi√≥n**:
- Se elige la t√°ctica de **Limitar el Acceso** mediante filtros de seguridad inyectados autom√°ticamente a nivel de consulta Elasticsearch.

**Sustento**:
- Implementando un **Security Context Interceptor** en el microservicio de b√∫squeda, todas las consultas a Elasticsearch incluyen autom√°ticamente las cl√°usulas de visibilidad basadas en el JWT del usuario. El √≠ndice de Elasticsearch contiene campos `visibility`, `owner_id` y `shared_with[]` sincronizados desde MongoDB v√≠a Change Streams. Los filtros booleanos de Elasticsearch son extremadamente eficientes (filtro en cached segments), garantizando **100% compliance** sin degradaci√≥n de performance, cumpliendo ESC-04.
---
## Escenario
| **Atributo** | **ID Escenario** | **Fuente Est√≠mulo** | **Est√≠mulo** | **Artefacto** | **Entorno** | **Respuesta** | **Medida de Respuesta** | **Comentario** |
|---------------|------------------|----------------------|---------------|----------------|--------------|----------------|--------------------------|----------------|
| **Seguridad** | ESC-03 | Atacante o bot automatizado | Intentos masivos de crear o modificar ideas | API del M√≥dulo de Gesti√≥n de Ideas | Acceso externo no autorizado | Sistema detecta patr√≥n, bloquea y registra evento | Bloqueo ‚â§ 2 seg, evento logueado | Evita abuso de recursos y ataques de spam |

### **T√°ctica Elegida**
La t√°ctica elegida es **Rate Limiting y Validaci√≥n de Tokens JWT**.

**T√≠tulo:**
- *Implementaci√≥n de Rate Limiting y JWT Validation para mitigar ataques de spam (ESC-03).*

**Contexto:**
El endpoint `/api/v1/ideas/create` puede recibir spam o intentos de fuerza bruta. Es necesario bloquear solicitudes repetitivas o an√≥malas.

**Alternativas:**
- **Rate Limiting:** Limitar n√∫mero de peticiones por IP o usuario en un intervalo.  
- **Validaci√≥n JWT + Captcha:** Confirmar identidad y prevenir automatizaci√≥n.

**Criterios de Elecci√≥n:**
- Bloqueo ‚â§ 2 seg  
- Protecci√≥n del servidor  
- Sencillez de integraci√≥n con Gateway  

**Decisi√≥n:**
Implementar **Rate Limiting** en el API Gateway y **JWT Validation** en middleware del microservicio.

**Sustento:**
Provee defensa inmediata ante ataques, bloqueando patrones an√≥malos sin degradar rendimiento general.

---
## Escenario
| Atributo | ID Escenario | Fuente Est√≠mulo | Est√≠mulo | Artefacto | Entorno | Respuesta | Medida de Respuesta | Comentario |
| :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: |
| **Seguridad** | **ESC-06** | Atacante externo / bot | Atacante realiza fuerza bruta o spam de ideas | Servidor de procesamiento de ideas | Acceso externo no autorizado | El sistema bloquea, detecta y registra intentos | Bloqueo ‚â§ 2 seg, registro en bit√°cora | Protege datos y reputaci√≥n de la plataforma |

### T√°ctica Elegida
La t√°ctica elegida es **Limitar el Acceso**, espec√≠ficamente mediante la t√©cnica de *Rate Limiting* (Limitaci√≥n de Tasa).

**T√≠tulo**:
- Implementaci√≥n de Limitaci√≥n de Tasa (*Rate Limiting*) para mitigar Ataques de Fuerza Bruta y Spam (ESC-06).

**Contexto**:
- El endpoint de creaci√≥n de ideas (HU001) y el de inicio de sesi√≥n (M√≥dulo 1, pero relevante para ataques) son vulnerables al *spam* o ataques de fuerza bruta (ESC-06). Se requiere una respuesta r√°pida (bloqueo en ‚â§ 2 seg) para proteger la integridad del sistema y evitar la sobrecarga de recursos.

**Alternativas**:
1. **Limitar el Acceso (Rate Limiting)**:
    - Restringir la cantidad de solicitudes que una IP o un usuario autenticado puede realizar a un endpoint espec√≠fico (ej. `/api/v1/ideas/create`) dentro de un periodo de tiempo.
    - Es la forma m√°s r√°pida y sencilla de mitigar ataques de fuerza bruta y spam de ideas.
2. **Autorizaci√≥n y Autenticaci√≥n Robustas**:
    - Implementar doble factor de autenticaci√≥n o pol√≠ticas de contrase√±as complejas.
    - Necesario, pero no previene ataques de *bots* no autenticados o usuarios maliciosos que ya han iniciado sesi√≥n.

**Criterios de Elecci√≥n**:
- Rapidez de respuesta ante el ataque (‚â§ 2 seg).
- Eficiencia para proteger recursos de procesamiento.
- Simplicidad de implementaci√≥n a nivel de API Gateway o *Load Balancer*.

**Decisi√≥n**:
- Se elige la t√°ctica de **Limitar el Acceso (Rate Limiting)** en el *API Gateway* que antecede al microservicio de Ideas.

**Sustento**:
- La implementaci√≥n de *Rate Limiting* en la capa de infraestructura es la soluci√≥n m√°s r√°pida y eficiente para el escenario ESC-06. Permite detectar un patr√≥n de solicitudes excesivas (ej. m√°s de 5 creaciones de ideas por minuto por IP) y bloquearlas en un tiempo casi instant√°neo (‚â§ 2 seg), protegiendo la reputaci√≥n y la disponibilidad de los recursos del servidor de ideas. Esto se complementa con la **Bit√°cora** para el registro del evento.

---




[‚¨ÖÔ∏è Anterior](../5.6.4/5.6.4.md) | [üè† Home](../../../README.md) | [Siguiente ‚û°Ô∏è](../5.6.6/5.6.6.md)